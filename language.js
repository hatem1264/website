const translations = {
    "Home": {
        en: "Home",
        fr: "Accueil"
    },
    "Profile": {
        en: "Profile",
        fr: "Profil"
    },
    "Education": {
        en: "Education",
        fr: "Formation"
    },
    "Skills": {
        en: "Skills",
        fr: "Compétences"
    },
    "Research": {
        en: "Research",
        fr: "Recherche"
    },
    "Publications": {
        en: "Publications",
        fr: "Publications"
    },
    "Teaching": {
        en: "Teaching",
        fr: "Enseignement"
    },
    "Contact": {
        en: "Contact",
        fr: "Contact"
    },
    "Welcome to my personal website!": {
        en: "Welcome to my personal website!",
        fr: "Bienvenue sur mon site personnel !"
    },
    "Here you can find information about my research, publications, and teaching activities.": {
        en: "Here you can find information about my research, publications, and teaching activities.",
        fr: "Vous trouverez ici des informations sur mes recherches, publications et activités d'enseignement."
    },
    "Academic and Scientific Profile": {
        en: "Academic and Scientific Profile",
        fr: "Profil Académique et Scientifique"
    },
    "As a Doctor in Applied Mathematics, I specialize in the regularization of ill-posed inverse problems and the development of numerical tools to solve them. Since obtaining my PhD, I have been actively exploring and developing skills in Artificial Intelligence (AI) applied to mathematical modeling problems. My international background is complemented by a strong command of teaching methods adapted to the French university system, reinforced by my current position as a Temporary Teaching and Research Fellow (A.T.E.R.) at the University of Caen-Normandie. In summary, my daily work combines scientific research and university teaching, with the goal of contributing to interdisciplinary projects that merge mathematical modeling, scientific programming, and pedagogy.": {
        en: "As a Doctor in Applied Mathematics, I specialize in the regularization of ill-posed inverse problems and the development of numerical tools to solve them. Since obtaining my PhD, I have been actively exploring and developing skills in Artificial Intelligence (AI) applied to mathematical modeling problems. My international background is complemented by a strong command of teaching methods adapted to the French university system, reinforced by my current position as a Temporary Teaching and Research Fellow (A.T.E.R.) at the University of Caen-Normandie. In summary, my daily work combines scientific research and university teaching, with the goal of contributing to interdisciplinary projects that merge mathematical modeling, scientific programming and pedagogy.",
        fr: "En tant que Docteur en Mathématiques Appliquées, je me spécialise dans la régularisation des problèmes inverses mal posés et le développement d'outils numériques pour les résoudre. Depuis l'obtention de mon doctorat, j'explore et développe activement des compétences en Intelligence Artificielle (IA) appliquée aux problèmes de modélisation mathématique. Mon parcours international est complété par une solide maîtrise des méthodes d'enseignement adaptées au système universitaire français, renforcée par ma position actuelle d'Attaché Temporaire d'Enseignement et de Recherche (A.T.E.R.) à l'Université de Caen-Normandie. En résumé, mon travail quotidien combine recherche scientifique et enseignement universitaire, avec pour objectif de contribuer à des projets interdisciplinaires fusionnant modélisation mathématique, programmation scientifique et pédagogie."
    },
    "Academic Background": {
        en: "Academic Background",
        fr: "Parcours Académique"
    },
    "PhD: Applied Mathematics (Grade: Very Honorable)": {
        en: "PhD: Applied Mathematics (Grade: Very Honorable)",
        fr: "Doctorat : Mathématiques Appliquées (Mention : Très Honorable)"
    },
    "Dec. 2023": {
        en: "Dec. 2023",
        fr: "Déc. 2023"
    },
    "ENIT: National School of Engineers of Tunis and UNICAEN: UFR of Sciences – University of Caen Normandie": {
        en: "ENIT: National School of Engineers of Tunis and UNICAEN: UFR of Sciences – University of Caen Normandie",
        fr: "ENIT : École Nationale d'Ingénieurs de Tunis et UNICAEN : UFR des Sciences – Université de Caen Normandie"
    },
    "Thesis Topic:": {
        en: "Thesis Topic:",
        fr: "Sujet de thèse :"
    },
    "Data assimilation and boundary data completion for the Stokes system and applications": {
        en: "Data assimilation and boundary data completion for the Stokes system and applications",
        fr: "Assimilation de données et complétion de données au bord pour le système de Stokes et applications"
    },
    "M2: Mathematics (Major)": {
        en: "M2: Mathematics (Major)",
        fr: "M2 : Mathématiques (Majeure)"
    },
    "June 2020": {
        en: "June 2020",
        fr: "Juin 2020"
    },
    "Bachelor's Degree: Fundamental and Applied Mathematics": {
        en: "Bachelor's Degree: Fundamental and Applied Mathematics",
        fr: "Licence : Mathématiques Fondamentales et Appliquées"
    },
    "June 2017": {
        en: "June 2017",
        fr: "Juin 2017"
    },
    "FST: Faculty of Mathematical, Physical and Natural Sciences of Tunis": {
        en: "FST: Faculty of Mathematical, Physical and Natural Sciences of Tunis",
        fr: "FST : Faculté des Sciences Mathématiques, Physiques et Naturelles de Tunis"
    },
    "Skills": {
        en: "Skills",
        fr: "Compétences"
    },
    "Languages": {
        en: "Languages",
        fr: "Langues"
    },
    "French, English, Arabic (read, written, and spoken)": {
        en: "French, English, Arabic (read, written, and spoken)",
        fr: "Français, Anglais, Arabe (lu, écrit et parlé)"
    },
    "IT & Scientific Computing": {
        en: "IT & Scientific Computing",
        fr: "Informatique & Calcul Scientifique"
    },
    "Tools:": {
        en: "Tools:",
        fr: "Outils :"
    },
    "Programming Languages:": {
        en: "Programming Languages:",
        fr: "Langages de Programmation :"
    },
    "Simulation Packages:": {
        en: "Simulation Packages:",
        fr: "Logiciels de Simulation :"
    },
    "AI (Beginner):": {
        en: "AI (Beginner):",
        fr: "IA (Débutant) :"
    },
    "Visualization:": {
        en: "Visualization:",
        fr: "Visualisation :"
    },
    "Research Topics": {
        en: "Research Topics",
        fr: "Thèmes de Recherche"
    },
    "Inverse problems and data assimilation/completion": {
        en: "Inverse problems and data assimilation/completion",
        fr: "Problèmes inverses et assimilation/complétion de données"
    },
    "Parameter identification in mathematical models": {
        en: "Parameter identification in mathematical models",
        fr: "Identification de paramètres dans les modèles mathématiques"
    },
    "Mathematical modeling and scientific computing": {
        en: "Modélisation mathématique et calcul scientifique",
        fr: "Modélisation mathématique et calcul scientifique"
    },
    "Artificial Intelligence (IA) and Mathematics": {
        en: "Artificial Intelligence (AI) and Mathematics",
        fr: "Intelligence Artificielle (IA) et Mathématiques"
    },
    "Scientific Productions": {
        en: "Scientific Productions",
        fr: "Productions Scientifiques"
    },
    "Work in Progress": {
        en: "Work in Progress",
        fr: "Travaux en cours"
    },
    "Teaching Activities": {
        en: "Teaching Activities",
        fr: "Activités d'Enseignement"
    },
    "Temporary Teaching and Research Fellow (A.T.E.R.) at the University of Caen-Normandie (2024-2025).": {
        en: "Temporary Teaching and Research Fellow (A.T.E.R.) at the University of Caen-Normandie (2024-2025).",
        fr: "Attaché Temporaire d'Enseignement et de Recherche (A.T.E.R.) à l'Université de Caen-Normandie (2024-2025)."
    },
    "Algorithmic (L2 Miashs)": {
        en: "Algorithmic (L2 Miashs)",
        fr: "Algorithmique (L2 Miashs)"
    },
    "Analysis and computer applications (L2 Maths)": {
        en: "Analysis and computer applications (L2 Maths)",
        fr: "Analyse et applications informatiques (L2 Maths)"
    },
    "Mathematical tools (L1 Life Sciences)": {
        en: "Mathematical tools (L1 Life Sciences)",
        fr: "Outils mathématiques (L1 Sciences de la Vie)"
    },
    "Applied mathematics for economics and management (L1 AES)": {
        en: "Applied mathematics for economics and management (L1 AES)",
        fr: "Mathématiques appliquées à l'économie et à la gestion (L1 AES)"
    },
    "Past experiences at the National School of Engineers of Tunis (2023-2024).": {
        en: "Past experiences at the National School of Engineers of Tunis (2023-2024).",
        fr: "Expériences passées à l'École Nationale d'Ingénieurs de Tunis (2023-2024)."
    },
    "Contact": {
        en: "Contact",
        fr: "Contact"
    },
    "Email:": {
        en: "Email:",
        fr: "Courriel :"
    },
    "Address:": {
        en: "Address:",
        fr: "Adresse :"
    },
    "Nicolas Oresme Laboratory of Mathematics (LMNO)": {
        en: "Nicolas Oresme Laboratory of Mathematics (LMNO)",
        fr: "Laboratoire de Mathématiques Nicolas Oresme (LMNO)"
    },
    "Department of Mathematics and Computer Science, UFR of Sciences": {
        en: "Department of Mathematics and Computer Science, UFR of Sciences",
        fr: "Département de Mathématiques et Informatique, UFR des Sciences"
    },
    "University of Caen Normandie": {
        en: "University of Caen Normandie",
        fr: "Université de Caen Normandie"
    },
    "14032 CAEN cedex 5, France": {
        en: "14032 CAEN cedex 5, France",
        fr: "14032 CAEN cedex 5, France"
    },
    "&copy; 2024 ZAYENI Hatem": {
        en: "&copy; 2024 ZAYENI Hatem",
        fr: "&copy; 2024 ZAYENI Hatem"
    }
};

let currentLang = localStorage.getItem('lang') || 'en'; // Default to English

function updateLangToggleButton() {
    const langToggleButton = document.getElementById('lang-toggle');
    if (langToggleButton) {
        langToggleButton.textContent = (currentLang === 'en') ? 'FR' : 'EN';
    }
}

function applyTranslations() {
    document.querySelectorAll('[data-en]').forEach(element => {
        const key = element.getAttribute('data-en');
        if (translations[key] && translations[key][currentLang]) {
            // Find the text node to update, preserving other elements like <i>
            let textNode = null;
            for (let i = 0; i < element.childNodes.length; i++) {
                if (element.childNodes[i].nodeType === Node.TEXT_NODE) {
                    textNode = element.childNodes[i];
                    break;
                }
            }

            if (textNode) {
                textNode.nodeValue = translations[key][currentLang];
            } else {
                // If no direct text node, it means the entire content might be translatable
                // or it's a simple element like <p> that only contains text.
                // In this case, we can safely replace innerHTML if no icon is present.
                // If an icon is present, we need to be more careful.
                const icon = element.querySelector('i');
                if (icon) {
                    // Temporarily remove icon, update text, then re-add icon
                    element.removeChild(icon);
                    element.textContent = translations[key][currentLang];
                    element.prepend(icon);
                } else {
                    element.textContent = translations[key][currentLang];
                }
            }
        }
    });
    updateLangToggleButton(); // Update button text after applying translations
}

function switchLanguage() {
    currentLang = (currentLang === 'en') ? 'fr' : 'en';
    localStorage.setItem('lang', currentLang);
    applyTranslations();
}

document.addEventListener('DOMContentLoaded', () => {
    applyTranslations();
    const langToggleButton = document.getElementById('lang-toggle');
    if (langToggleButton) {
        langToggleButton.addEventListener('click', switchLanguage);
    }
});